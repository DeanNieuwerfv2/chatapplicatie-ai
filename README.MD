<div align="center">

# ğŸ¤– Chatapplicatie AI  
_Een complete AI-chatapplicatie met FastAPI, Amazon Bedrock, React & AWS hosting._

[![Tech](https://img.shields.io/badge/Built%20with-FastAPI%20â€¢%20React%20â€¢%20AWS-10B981?style=for-the-badge)](#)

</div>

---

## ğŸ“¦ Over dit project

Dit project is een moderne AI-chatapplicatie bestaande uit:

- **Frontend** â€“ React (Vite) + TailwindCSS  
- **Backend** â€“ FastAPI (Python) + Amazon Bedrock (Claude 3 Haiku)  
- **Conversatielogs** â€“ Amazon S3 (1 JSON-bestand per bericht)  
- **Hosting**  
  - Backend â†’ AWS App Runner (Docker image vanuit ECR)  
  - Frontend â†’ S3 Static Website Hosting  

---

## ğŸ§± Architectuur

```text
[ Browser (React UI) ]
          â”‚
          â–¼
[ Frontend @ S3 / CloudFront ]
          â”‚
          â–¼
[ Backend @ App Runner (FastAPI, Docker) ]
          â”‚
          â”œâ”€â”€ Bedrock: Claude 3 Haiku
          â””â”€â”€ S3: Conversatielogs opslaan
```
---
## ğŸ“ Projectstructuur

```text
.
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ pyproject.toml
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ .env.example
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ App.jsx
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ tailwind.config.js
â”‚
â””â”€â”€ README.md
```

## ğŸ” Environment variabelen

```text
Backend (backend/.env)

(niet committen)

AWS_REGION=eu-west-1
BEDROCK_MODEL_ID=anthropic.claude-3-haiku-20240307-v1:0
CHAT_LOG_BUCKET=<jouw-s3-bucketnaam>

App Runner environment variables

Voeg dezelfde variabelen toe in App Runner onder Environment variables.
```

## ğŸ§ª Backend lokaal starten
```text
Vereist: Python 3.11+ en uv package manager

cd backend
uv sync
uv run uvicorn main:app --reload --port 8000


Endpoints:

Docs â†’ http://localhost:8000/docs

Health â†’ http://localhost:8000/health

Chat â†’ POST /chat
```

##  ğŸ’¬ Chat endpoint voorbeeld
```code
Request
{
  "message": "Hallo!",
  "conversation_id": "optioneel-uuid"
}

Response
{
  "reply": "Antwoord van Claudeâ€¦",
  "conversation_id": "uuid-blijft-consistent"
}

S3 log structuur
s3://<CHAT_LOG_BUCKET>/conversations/<conversation_id>/
    2024-05-12T15:22:11_user.json
    2024-05-12T15:22:12_assistant.json
```

## ğŸ§ª Frontend lokaal starten

**Vereist:** Node 18+

```bash
cd frontend
npm install
npm run dev
```

Frontend draait op:  
ğŸ‘‰ http://localhost:5173

De backend-URL staat in:  
`frontend/src/App.jsx`


---

## ğŸ³ Backend Docker builden

```bash
cd backend
docker build -t chat-backend .
docker run -p 8000:8000 chat-backend
```


---

## â˜ï¸ AWS Deployment (korte stappen)

### 1. Backend â†’ ECR â†’ App Runner

#### Bouw & push Docker image

```bash
aws ecr get-login-password --region eu-west-1 \
 | docker login --username AWS --password-stdin <ACCOUNT_ID>.dkr.ecr.eu-west-1.amazonaws.com

docker tag chat-backend:latest <ACCOUNT_ID>.dkr.ecr.eu-west-1.amazonaws.com/chat-backend:latest
docker push <ACCOUNT_ID>.dkr.ecr.eu-west-1.amazonaws.com/chat-backend:latest
```

#### Maak App Runner service

**Source:** ECR  
**Port:** 8000  
**Environment vars:** (zie boven)

**IAM Rollen:**
- ECR access role  
- Instance role met:
  - `bedrock:InvokeModel`
  - `s3:GetObject`
  - `s3:PutObject`
  - `s3:ListBucket`

Je krijgt een App Runner URL zoals:

```
https://abcd1234.eu-west-1.awsapprunner.com
```


---

### 2. Frontend â†’ S3 Static Website

#### Build

```bash
npm run build
```

Upload daarna de outputmap **dist/** naar je S3 bucket.

Zet *Static Website Hosting* aan en voeg deze bucket policy toe:

```json
{
  "Effect": "Allow",
  "Principal": "*",
  "Action": "s3:GetObject",
  "Resource": "arn:aws:s3:::<bucketnaam>/*"
}
```


---

## ğŸ‘¥ Werken met deze repo (voor developers)

### Repo clonen

```bash
git clone https://github.com/DeanNieuwerfv2/chatapplicatie-ai.git
cd chatapplicatie-ai
```

### Lokaal starten

**Backend:**

```bash
cd backend
uv run uvicorn main:app --reload --port 8000
```

**Frontend:**

```bash
cd ../frontend
npm install
npm run dev
```


---

## ğŸ”® Toekomstige uitbreidingen

- Historiek ophalen uit S3 en tonen in de UI  
- Ondersteuning voor meerdere modellen  
- Deploy pipeline via GitHub Actions  
- API-key beveiliging  


---

## ğŸ§‘â€ğŸ’» Credits

**Ontwikkeling:** Dean  Nieuwerf
**AI Pair Programming:** ChatGPT (GPT-5.1)
